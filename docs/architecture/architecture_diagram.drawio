<mxfile host="65bd71144e">
    <diagram name="Architecture" id="arch1">
        <mxGraphModel dx="1500" dy="1400" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="2800" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                
                <!-- Input Layer -->
                <mxCell id="input" value="Informatica XMLs&#10;(Mapping, Workflow, Session, Worklet)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#999999;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="40" y="40" width="200" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Parsers -->
                <mxCell id="parsers" value="Parsers&#10;(Mapping, Workflow, Session, Worklet)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#999999;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="280" y="40" width="180" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Normalizer -->
                <mxCell id="normalizer" value="Normalizer&#10;(Canonical Model Builder)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#999999;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="500" y="40" width="200" height="80" as="geometry"/>
                </mxCell>
                
                <!-- AI Enhancement Agents (NEW - Before Code Generation) -->
                <mxCell id="ai_enhance" value="AI Enhancement Agents&#10;(Model Enhancement, Validation)&#10;Enhance Canonical Model" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontColor=#000000" parent="1" vertex="1">
                    <mxGeometry x="740" y="40" width="220" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Version Store (Updated - JSON + Graph) -->
                <mxCell id="version_store" value="Version Store&#10;(JSON + Neo4j Graph)&#10;Graph-First Mode" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="500" y="160" width="200" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Graph Store (NEW) -->
                <mxCell id="graph_store" value="Graph Store&#10;(Neo4j)&#10;Cross-Mapping Lineage&#10;Impact Analysis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="280" y="160" width="180" height="100" as="geometry"/>
                </mxCell>
                
                <!-- Translator -->
                <mxCell id="translator" value="Translators&#10;(PySpark, SQL, Expression AST)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#999999;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1000" y="40" width="200" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Code Generators -->
                <mxCell id="generator" value="Code Generators&#10;(PySpark, DLT, SQL, Spec, Tests)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#999999;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1240" y="40" width="220" height="80" as="geometry"/>
                </mxCell>
                
                <!-- AI Review Agents (Post-Generation) -->
                <mxCell id="ai_review" value="AI Review Agents&#10;(Code Fix, Risk Assessment)&#10;Review Generated Code" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1480" y="40" width="220" height="80" as="geometry"/>
                </mxCell>
                
                <!-- API -->
                <mxCell id="api" value="REST API&#10;(FastAPI)&#10;+ Graph Query Endpoints" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#999999;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="740" y="160" width="200" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Frontend -->
                <mxCell id="frontend" value="Frontend UI&#10;(React + Vite)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#999999;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="740" y="280" width="200" height="60" as="geometry"/>
                </mxCell>
                
                <!-- AI & LLM Layer -->
                <mxCell id="ai_llm" value="AI &amp; LLM Layer&#10;(OpenAI, Azure, Local)&#10;LLM Manager" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1480" y="160" width="220" height="80" as="geometry"/>
                </mxCell>
                
                <!-- DAG Builder -->
                <mxCell id="dag" value="DAG Builder&#10;(Topological Sort, Cycle Detection)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#999999;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="40" y="160" width="180" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Supporting Services -->
                <mxCell id="services" value="Supporting Services&#10;(Connectors, Catalog, Notifications)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1000" y="160" width="240" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Main Flow Edges -->
                <mxCell id="e1" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2" parent="1" source="input" target="parsers" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <mxCell id="e2" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2" parent="1" source="parsers" target="normalizer" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <mxCell id="e3" value="Canonical Model" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#d79b00" parent="1" source="normalizer" target="ai_enhance" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <mxCell id="e4" value="Enhanced Model" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#d79b00" parent="1" source="ai_enhance" target="translator" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <mxCell id="e5" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2" parent="1" source="translator" target="generator" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <mxCell id="e6" value="Generated Code" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#d79b00" parent="1" source="generator" target="ai_review" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- Version Store Connections -->
                <mxCell id="e7" value="Save" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;strokeColor=#82b366" parent="1" source="ai_enhance" target="version_store" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <mxCell id="e8" value="Dual-Write" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;strokeColor=#82b366" parent="1" source="version_store" target="graph_store" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- API Connections -->
                <mxCell id="e9" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;dashed=1" parent="1" source="version_store" target="api" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <mxCell id="e10" value="Graph Queries" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;strokeColor=#82b366" parent="1" source="graph_store" target="api" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <mxCell id="e11" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2" parent="1" source="api" target="frontend" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- DAG Connection -->
                <mxCell id="e12" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;dashed=1" parent="1" source="normalizer" target="dag" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <mxCell id="e13" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;dashed=1" parent="1" source="dag" target="api" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- AI Connections -->
                <mxCell id="e14" value="LLM" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;strokeColor=#9673a6" parent="1" source="ai_llm" target="ai_enhance" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <mxCell id="e15" value="LLM" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;strokeColor=#9673a6" parent="1" source="ai_llm" target="ai_review" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <mxCell id="e16" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;dashed=1" parent="1" source="ai_review" target="api" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- Generator to API -->
                <mxCell id="e17" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;dashed=1" parent="1" source="generator" target="api" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- Supporting Services -->
                <mxCell id="e18" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;dashed=1" parent="1" source="services" target="api" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- Legend -->
                <mxCell id="legend" value="Legend:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="40" y="400" width="100" height="30" as="geometry"/>
                </mxCell>
                
                <mxCell id="legend_deterministic" value="Deterministic Components" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#999999;fontColor=#FFFFFF" parent="1" vertex="1">
                    <mxGeometry x="40" y="440" width="180" height="30" as="geometry"/>
                </mxCell>
                
                <mxCell id="legend_ai" value="AI/LLM Components" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#000000" parent="1" vertex="1">
                    <mxGeometry x="240" y="440" width="180" height="30" as="geometry"/>
                </mxCell>
                
                <mxCell id="legend_graph" value="Graph Storage" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000" parent="1" vertex="1">
                    <mxGeometry x="440" y="440" width="180" height="30" as="geometry"/>
                </mxCell>
                
                <mxCell id="legend_flow" value="Main Flow" style="text;html=1;strokeColor=#d79b00;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="640" y="440" width="100" height="30" as="geometry"/>
                </mxCell>
                
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>
